% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{scrartcl}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={The regulation of medical devices involving software in the EU},
  pdfauthor={Mathijs van Westendorp},
  pdfkeywords={Artificial Intelligence, Medical Device Regulation, MDCG, Risk classification, SAMD, Medical Software},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\title{The regulation of medical devices involving software in the EU}
\author{Mathijs van Westendorp}
\date{2021-08-08}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{2}
\tableofcontents
}
\hypertarget{abstract}{%
\section*{Abstract}\label{abstract}}
\addcontentsline{toc}{section}{Abstract}

Software and AI play an increasingly important role in medical devices. The evolution in AI has already led to regulatory change in other sectors and there are claims that further changes are to follow. Therefore, we look into the current regulatory requirements in the EU for medical devices that include software and AI.

We observe that the classification of software is not fully based on the benefit-risk. The choice of implementation influences the classification regardless of benefit-risk under both the Directive and the Regulation albeit in different ways.

New versions of software and AI can be released in faster succession. Therefor, we consider the equivalency procedure for these devices.

At this time there does not seem an immediate need to change the Regulation itself. We reason that the critical criterion is the validation of devices including AI. While this may require further detailing, these specific requirements for AI could be set through a Common Specification. This would have to provide specification on the required standards of safe design, data sharing, interpretability, verification and validation.

The concerns of robustness and interpretability of AI require further developments before it can be validated for complex medical applications and approved as a medical device.

\textbf{Artificial Intelligence, Medical Device Regulation, MDCG, Risk classification, SAMD, Medical Software}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

Software is playing an increasingly important role in healthcare. Healthcare providers have been transitioning to electronic patient dossiers and other devices that include or embed software in their daily practice. The combination of big data and Artificial Intelligence (AI) are said to hold great promise for healthcare by allowing for more performant devices to assist medical decision making. While AI is not new to medicine,\footnote{Reference to MYCIN (\url{https://doi.org/10.1016\%2F0025-5564\%2875\%2990047-4}) and ECG articles (\url{https://www.nature.com/articles/s41591-018-0306-1})} the resurgence in the popularity of AI is driven by neural networks that, in combination with hardware advances, have shown high performance on tasks hitherto thought to be beyond the capability of software.\footnote{For example super human performance in Go and StarCraft.\footnotemark{}}

However, the performance of these models is task dependent and robustness is a known issue of AI.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Ronan Hamon and others, \emph{Robustness and Explainability of {Artificial Intelligence}: From Technical to Policy Solutions.} (2020) \textless{}\url{https://op.europa.eu/publication/manifestation_identifier/PUB_KJNA30040ENN}\textgreater{} accessed 26 August 2020}.} There is a big potential for safety and performance issues when these technologies are applied, especially when it affects clinical decision making. Even more so considering the tendency of complex models for overfitting and the difficulty in assessing dataset bias (or data poisoning in its deliberate form) for complex datasets.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Ibid}.} The evolution of software and AI leads to questions of how software is regulated when used in a healthcare scenario as a medical device.

In the EU, medical devices have long been regulated by the Medical Device Directive, but triggered by the PIP-scandal,\footnote{\protect\hyperlink{ref-europeancommissionProposalREGULATIONEUROPEAN2012}{European Commission, {`Proposal for a {REGULATION OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} on Medical Devices, and Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009'} (2012) COM(2012) 542 final}.} a new regulatory effort has led to the introduction of the Medical Device Regulation in 2017. According to the EC, this Regulation is going into full effect on the 26th of May 2021.\footnote{Although devices can be put into service under the Directive until 26th of May 2025.} However, the Directive remains relevant for the coming years given that the last possible date for placing devices on the market under Directive is set for 2024-2025. Even though the Regulation is yet to come into full effect, there are suggestions \emph{that} AI necessitates changes to the regulatory framework,\footnote{\protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{Timo Minssen, Marc Mimler and Vivian Mak, {`When {Does Stand}-{Alone Software Qualify} as {A Medical Device} in the {European Union}?---{The Cjeu}'s {Decision} in {Snitem} and {What} It {Implies} for the {Next Generation} of {Medical Devices}'} {[}2020{]} Medical Law Review \textless{}\url{https://academic.oup.com/medlaw/advance-article/doi/10.1093/medlaw/fwaa012/5865470}\textgreater{} accessed 26 August 2020}.} although it is unclear \emph{what} these changes are or the specific aspect of AI that need addressing.

To investigate potential shortcomings in the mitigation of the risks posed by AI under the current regulatory framework, we will assess how software, including AI, used for medical purposes, is regulated and what changes the newly introduced EU Medical Device Regulation brings. We assess the legal definition, classification and evidence requirements for medical devices, software and AI. In doing so, answering the following questions: what is software, how does contemporary AI relate to software, when is software (part of) a medical device, how is a medical device that is, or contains, software classified and what are the (evidence) requirements for market approval in the EU of medical devices involving software.

\hypertarget{software-artificial-intelligence-and-medical-devices}{%
\section{Software, Artificial Intelligence and Medical Devices}\label{software-artificial-intelligence-and-medical-devices}}

Before looking into the definition of a medical device, we first need to establish what software is and how it is defined. Next a definition of AI is discussed. This allows to show the relationship between software and AI, which is relevant for the applicability of the regulatory framework to the latter. While both the Directive and the Regulation use software in the definition of a medical device, the definition of software itself is neither in the Directive nor Regulation. Therefore, we first introduce two related terms relevant to software and AI, namely models and algorithms.

\hypertarget{models-algorithms-and-software}{%
\paragraph*{Models, algorithms and software}\label{models-algorithms-and-software}}
\addcontentsline{toc}{paragraph}{Models, algorithms and software}

The first distinction that we make is between a model and an algorithm. A model describes a system and an algorithm does something in a model or system.

Concerning models, we further identify two different models: a conceptual model and mathematical model. A conceptual model is a representation of a system, made of the composition of concepts which are used to help people know, understand, or simulate a subject the model represents.\footnote{\protect\hyperlink{ref-wikipediaConceptualModel}{Wikipedia}, \protect\hyperlink{ref-wikipediaConceptualModel}{{`Conceptual Model'} \textless{}\url{https://en.wikipedia.org/wiki/Conceptual_model}\textgreater{} accessed 4 September 2020}.} A mathematical model is a description of a system using mathematical concepts and language.\footnote{\protect\hyperlink{ref-wikipediaMathematicalModel}{Wikipedia}, \protect\hyperlink{ref-wikipediaMathematicalModel}{{`Mathematical Model'} \textless{}\url{https://en.wikipedia.org/wiki/Mathematical_model}\textgreater{} accessed 4 September 2020}.} Typically, defining a mathematical model is part of the development of an algorithm.

An algorithm is defined as `\emph{a finite sequence of well-defined computer-implementable instructions}'.\footnote{\protect\hyperlink{ref-wikipediaAlgorithm}{Wikipedia}, \protect\hyperlink{ref-wikipediaAlgorithm}{{`Algorithm'} \textless{}\url{https://en.wikipedia.org/wiki/Algorithm}\textgreater{} accessed 4 September 2020}.} Algorithms are closely related to software as the definition of software is that the latter are `\emph{the instructions that control what a computer} \emph{does}'.\footnote{\protect\hyperlink{ref-cambridgedictionarySoftware}{Cambridge Dictionary}, \protect\hyperlink{ref-cambridgedictionarySoftware}{{`Software'} (\emph{Software \textbar{} meaning in the Cambridge English Dictionary}) \textless{}\url{https://dictionary.cambridge.org/dictionary/english/software}\textgreater{} accessed 4 September 2020}.} Because software is used in a medical device context, the definition used by the Medical Device Coordination Group (MDCG) in the guidance document on the classification of software is slightly different, where it defines software as `\emph{a set of instructions that processes input data and creates output data}'.\footnote{While the MDCG does not state whether these instructions need to be for a computer, without this prerequisite, `software' becomes too broad of a term traditionally non-software things would become software such as cooking recipes.\footnotemark{}}

What follows from these definitions is that algorithms are instructions that are computer-implementable, where the algorithm is based on, and the algorithm itself forms, a mathematical model. Given that software are instructions for a computer, that software are algorithms that are implemented on a computer, the software itself forms a mathematical model. This means that software are instructions for a solution to a real world problem through implementing a model that aims to represent system in which the actual problem is encountered.

\hypertarget{artificial-intelligence}{%
\paragraph*{Artificial Intelligence}\label{artificial-intelligence}}
\addcontentsline{toc}{paragraph}{Artificial Intelligence}

One of the difficulties of discussing AI is that there is no well defined definition of `Artificial Intelligence' (AI). The debate thereon and the related definition of `intelligence', besides being complex, is not actually that important for its understanding.\footnote{\protect\hyperlink{ref-pfeiferUnderstandingIntelligence1999a}{Rolf Pfeifer and Christian Scheier}, \protect\hyperlink{ref-pfeiferUnderstandingIntelligence1999a}{\emph{Understanding Intelligence} ({MIT Press} 1999)} 5} AI as defined by John McCarthy Artificial Intelligence is the study of intelligent agents which are defined as `\emph{any device that perceives its environment and takes actions that maximize its chance of successfully achieving its goal}'.\footnote{\protect\hyperlink{ref-mccarthyWhatArtificialIntelligence2007b}{John McCarthy}, \protect\hyperlink{ref-mccarthyWhatArtificialIntelligence2007b}{\emph{What {Is Artificial Intelligence}?} ({Stanford University} 2007) \textless{}\url{http://www-formal.stanford.edu/jmc/}\textgreater{}}.} Or that AI are \emph{`methods capable of rational and autonomous reasoning, action or decision making, and/or adaptation to complex environment, and to previously unseen circumstances'.}\footnote{\protect\hyperlink{ref-russellArtificialIntelligenceModern2010c}{Stuart J Russell, Peter Norvig and Ernest Davis, \emph{Artificial {Intelligence}: {A Modern Approach}} (3rd ed, {Prentice Hall} 2010)}.} Such a device can consist of a mathematical model that uses data from the environment as input to, through a mathematical procedure (i.e.~an algorithm) that decides upon the procedure which maximises the statistical probability that the device achieves its set goal. While such agents are not necessarily implemented in software, it is a \emph{de facto} requirement when complexity increases beyond the trivial.

Even though deep learning has made AI popular by a high performance in some specific use-cases, AI is more than just the deep learning or neural networks as it encompasses any algorithm or software that optimises its success in an environment. In fact, deep learning is a subset of machine learning, which, in turn, is a subset of AI.

The relation between the different concepts that are discussed in this section are given by the following formula.

\[ML\subseteq AI\subseteq software\subseteq algorithm\subseteq model_{mathematical}\subseteq model_{conceptual}\subseteq system\]

where the \(\subseteq\) indicates that the element on the left is a subset of the element on the right.

\hypertarget{machine-learning}{%
\paragraph*{Machine Learning}\label{machine-learning}}
\addcontentsline{toc}{paragraph}{Machine Learning}

The distinctive characteristic of machine learning compared to other algorithms in the domain of AI, is that machine learning algorithms can build a mathematical model based on the data, without the need for explicit programming or \emph{a priori}, explicit, feature selection.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Hamon and others}, \protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{(n 3)} 10} The idea is that machines learn models by iteratively improving the parameters of a model that optimises a certain function. Because these models are data driven, there is little domain knowledge involved and contrary to model driven methodologies, there is little explicit representation of domain knowledge by, or as understood by, domain experts.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Hamon and others}, \protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{ibid} 12-13}

It is important to make the conceptual distinction between the algorithms that are used to calculate the parameters and the (mathematical) model consisting of the parameters themselves. Whereas the first is readily understandable given that it is explicitly coded in a human readable programming language, the latter consists of a large graph with many nodes each having a distinct numeric value, which is not a representation suited for a meaningful interpretation by humans.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Hamon and others}, \protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{ibid} 10} The former is the programming code whereas the latter is the result of training the model.

\hypertarget{simd-and-samd}{%
\paragraph*{SiMD and SaMD}\label{simd-and-samd}}
\addcontentsline{toc}{paragraph}{SiMD and SaMD}

The two categories of medical devices concerning software are SiMD and SaMD. This is the case both when considering the FDA's regulation of medical devices\footnote{\protect\hyperlink{ref-sternRegulatoryOversightCausal2019a}{Ariel Dora Stern and WNicholson Price, {`Regulatory {Oversight}, {Causal Inference}, and {Safe} and {Effective Health Care Machine Learning}'} {[}2019{]} Biostatistics \textless{}\url{https://academic.oup.com/biostatistics/advance-article/doi/10.1093/biostatistics/kxz044/5631849}\textgreater{} accessed 3 December 2019}.} and the EU medical devices regulatory framework. A SiMD is a medical device in which software is part of the hardware medical device, or \textbf{embedded software}. A SaMD is medical devices in and of itself, so-called \textbf{stand alone software}, which is defined by the IMDRF as: `\emph{software intended to be used for one or more medical purposes that perform these purposes without being part of a hardware medical device}'.\footnote{\url{http://www.imdrf.org/docs/imdrf/final/technical/imdrf-tech-170921-samd-n41-clinical-evaluation_1.pdf}} This is in line with distinction that the Medical Device Regulation makes between `\emph{devices that incorporate software}' (describing SiMD) and `\emph{software that are devices in themselves}' (which describes SaMD).\footnote{Annex I, 17 \& 23(ab) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{175}.}

The concept of SaMD is helpful to the degree that it allows to sidestep the question of linking software to a hardware medical device for the cases where the software on its own has an intended medical purpose. This prevents the difficulty of determining whether a device is within the scope of the Regulation in case its workings depend on software but where the computation is done on commodity hardware and not on what is traditionally seen as the `medical device'.

\hypertarget{medical-devices-and-software}{%
\subsection{Medical devices and software}\label{medical-devices-and-software}}

After defining software and finding that implementations of contemporary AI fall into the software category, the definitions of `\emph{medical device}' in both the Directive and Regulation are discussed and compared. Software is part of the definition of a medical device in both the Directive and the Regulation. To indicate the differences, the parts of the definition that differ between the Directive and Regulation are underlined.

\hypertarget{software-medical-devices-under-the-medical-device-directive}{%
\subsubsection{Software \& medical devices under the Medical Device Directive}\label{software-medical-devices-under-the-medical-device-directive}}

We consider the medical device directive, including the amendment done in Directive 2007/47/EC of the European Parliament and of the Council of 5 September 2007, which defines a medical device as follows: a \emph{'medical device means any instrument, apparatus, appliance, software,}\footnote{This explicit mentioning of software was added by Directive 2007/47/EC of the European Parliament and of the Council of 5 September 2007.} \emph{material or other article, whether used alone or in combination,} \emph{\underline{including the software intended by its manufacturer to be used specifically for diagnostic and/or therapeutic purposes and necessary for its proper application}, intended by the manufacturer to be used for human beings for the purpose of:}

\begin{itemize}
\item
  \emph{diagnosis, prevention, monitoring, treatment or alleviation of disease,}
\item
  \emph{diagnosis, monitoring, treatment, alleviation of or compensation for an injury or} \emph{\underline{handicap},}
\item
  \emph{investigation, replacement or modification of the anatomy or of a physiological process,}
\item
  \emph{\underline{control of conception}'.}\footnote{Art 1(2)(a) \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC, {`{COUNCIL DIRECTIVE} 93/42/{EEC} of 14 {June} 1993 Concerning Medical Devices'}}.}
\end{itemize}

From this it is clear that diagnostic and therapeutic software are within the scope of the Directive. The original directive already says that software is a medical device in the case it has an intended medical purpose. The amendment of 2007 further added that a `\emph{medical device means any {[}\ldots{]} software}'. In its definition, the Directive does not distinguish between standalone and embedded software for its definition of a medical device and as software in general is within the scope of the Directive, so are both sub-categories when there is an intended medical purpose. This does not mean that the distinction is irrelevant. As we will see in section @ref(\#sec:Classification-of-medical), the distinction between embedded and stand alone software does have implications for the classification of software and the corresponding regulatory requirements.

Similarly, although not as explicit, the Medical Device Directive states that software can be a medical device both in its definition and in the definitions of active medical device in the Annex that `\emph{any active medical device}', and thus software, `\emph{used alone or in combination}' either for therapeutic or diagnostic purposes also constitutes a medical device within the scope of the Directive.\footnote{Art 1(2)(a) \& Annex IX, 1.4-1.6 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.}

The Directive states that `\emph{Software, which drives a device or influences the use of a device, falls automatically in the same class}'.\footnote{Annex IX, 2.3 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} From this we can conclude that if software is identified as being part of the functioning of a medical device, meaning that if there is a interconnect between the software and a medical device through which the software drivers or influences that device, that it should be considered as part of that medical device. If software is not part of a hardware medical device, then it can still be a medical device within the scope of the Directive as was clarified by the 2007 amendments, as stand alone software is considered an active medical device under the directive. `\emph{Stand alone software is considered to be an active medical device}',\footnote{Annex IX, II, 1.4 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} clearly indicating that SaMD is within the scope of the Directive.

\hypertarget{software-medical-devices-under-the-medical-device-regulation}{%
\subsubsection{Software \& medical devices under the Medical Device Regulation}\label{software-medical-devices-under-the-medical-device-regulation}}

According to the medical device regulation: software can be part of a system, where \emph{`system' means a combination of products, either packaged together or not, which are intended to be inter-connected or combined to achieve a specific medical purpose}.\footnote{Art 2(11) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.}

The medical device regulation contains a slightly different definition where \emph{`medical device' means any instrument, apparatus, appliance, software,} \emph{\underline{implant, reagent,}} \emph{material or other article intended by the manufacturer to be used, alone or in combination, for human beings for one or more of the following specific medical purposes:}

\begin{itemize}
\item
  \emph{diagnosis, prevention, monitoring,} \emph{\underline{prediction, prognosis}, treatment or alleviation of disease,}
\item
  \emph{diagnosis, monitoring, treatment, alleviation of, or compensation for, an injury or} \emph{\underline{disability},}
\item
  \emph{investigation, replacement or modification of the anatomy or of a physiological} \emph{\underline{or pathological process or state},}
\item
  \emph{\underline{providing information by means of in vitro examination of specimens derived from the human body, including organ, blood and tissue donations}}
\end{itemize}

The essential part in this definition is that '\emph{any {[}\ldots{]} software {[}\ldots{]} intended by the manufacturer to be use, alone or in combination {[}\ldots{]} for specific medical purposes'} is a medical device that falls within the scope of the Medical Device Regulation. Software in its own right qualifies as a medical device when it is specifically intended by the manufacturer for one of the medical purposes\footnote{Preamble 19 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} as listed in article 2 of the Medical Device Regulation.\footnote{Art 2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} This list of specific medical purposes essentially includes any relevant action related to disease, injury or disability, anatomy or physiological or pathological process and specimens of human biological material. This definition encompasses a broad range of products depending on whether a purpose falls within the contours of one of the listed purposes.

The Regulation is applicable to both types of software as it is clarified that '{[}t{]}he qualification of software, either as a device or an accessory, is independent of the software's location or the type of interconnection between the software and a device*'.\footnote{Preamble 19 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Taken together with the fact that both the definition of a medical device in the Directive and Regulation clearly include software, and that the regulator has made it clear that the location or type of interconnection does not impact the qualification, whether software is in or out side of the hardware of a medical device has no influence on the scope and applicability of these regulations.

\hypertarget{intended-medical-purpose-of-software}{%
\subsection{Intended medical purpose of software}\label{intended-medical-purpose-of-software}}

Not all software that is used in a healthcare setting is a medical device. When software does not have a `specific medical purpose' it is not a medical device within the meaning of the Regulation and that software does not fall within the scope of the Regulation. The preamble to the Regulation has clarified this by stating that `\emph{software in its own right {[}\ldots{]} intended by the manufacturer to be used for one or more of the medical purposes set out in the definition of a medical device, qualifies as a medical device, while software for general purposes, even when used in a healthcare setting, or software intended for life-style and well-being purposes is not a medical device {[}\ldots{]}}'.\footnote{Preamble 19 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} It is clear that the legislator used the new Regulation to provide some clarification that the scope of the Regulation does not extend to software that is used in medical context, but which does not have a medical purpose.

Clarifying that the `intended medical purpose' is fundamental in identifying a medical device and that the qualification does not depend on the location of the software is prudent given that the choice of software location should not change the legal requirements for medical devices.\footnote{See also \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{MDCG}, \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{{`Guidance on {Clinical Evaluation} ({MDR}) / {Performance Evaluation} ({IVDR}) of {Medical Device Software}'} (2020) 2020-1 \textless{}\url{https://ec.europa.eu/docsroom/documents/40323}\textgreater{}} 7-8} The ECJ has clarified that a device is within the scope of the Medical Device Directive in the case that the manufacturer of the device intends it to be used for medical purposes.\footnote{Para 30 , \protect\hyperlink{ref-BrainProducts2012}{\emph{Brain {Products}} {[}2012{]}}.} In other words the intended purpose needs to be specifically medical.\footnote{Para 17 , \protect\hyperlink{ref-BrainProducts2012}{ibid}.} For software there is a noteworthy difference between software with a \emph{medical purpose} and software used in a \emph{medical context}.\footnote{Para 25-26 , \protect\hyperlink{ref-SNITEM2017}{\emph{{SNITEM}} {[}2017{]}}.} The ECJ gives an example based on the Commissions Guidelines that software in a medical context that simply manages a digital library and does not perform an action on data that goes beyond storage, compression or simple search is not software with a medical purpose and therefore not within the scope of the medical device Regulations.\footnote{Para 33 , \protect\hyperlink{ref-SNITEM2017}{ibid}.}

Considering, among other arguments, that software can be a device in and of itself, the ECJ has clarified '\emph{that software does not need to act directly on or in the human body to fall within the scope of the MDD'}.\footnote{Para 28 , \protect\hyperlink{ref-SNITEM2017}{ibid}.} As such, whether the software runs on an implantable device, a computing device in proximity of the user or in the cloud is not relevant for determining whether it falls under the scope of the Medical Device Directive, an argument which is equally applicable to the Medical Device Regulation.

The intended medical purpose is the fundamental distinctive element.\footnote{See also \protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{Minssen, Mimler and Mak}, \protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{(n 7)}.} This applies to both hardware and software medical devices, although the ECJ sees that there is indication that non software has a wider scope than software has.\footnote{Para 19 , \protect\hyperlink{ref-BrainProducts2012}{\emph{Brain {Products}} (n 33)}.} Regardless, the intended medical purpose is fundamental in identifying a medical device, not whether it is implemented in pure hardware, embedded software or stand alone software.

\hypertarget{sec:Classification-of-medical}{%
\section{Classification of medical device software}\label{sec:Classification-of-medical}}

In the case that software has a medical purpose and is within the scope of the Directive or Regulation, the next question is how medical device software should be classified. Classification is based on the principle of risk where with a classification into different classes that impose increasingly stringent requirements, among others, on the evidence needed for market approval. The commonalities and differences between the Regulation and the Directive are highlighted to assess whether the former has clarified the regulation of software and medical devices.

\hypertarget{classification-based-on-risk}{%
\subsection{Classification based on risk}\label{classification-based-on-risk}}

Both the Directive and Regulation contain procedures and regulatory requirements that need to ensure that there is sufficient evidence showing that the device is in conformity with regulatory requirements. Whether a device is within the scope of the Directive, or under the scope of the Regulation when the latter comes into effect, the objective remains the same in ensuring that patients have timely access to safe and performant medical devices.\footnote{Preamble 2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} This is equally so for medical devices that involve software, both when considering software as medical device (SaMD),\footnote{The International Medical Device Regulators Forum has defined SaMD as: `\emph{software intended to be used for one or more medical purposes that perform these purposes without being part of a hardware medical device}' in \url{http://www.imdrf.org/docs/imdrf/final/technical/imdrf-tech-170921-samd-n41-clinical-evaluation_1.pdf}.} and software that is embedded a hardware medical device (SiMD).

Both the Directive and Regulation have 4 classes in which medical devices can be classified: class I, IIa, IIb and III.\footnote{There are sub-classes within these categories (implantable, including medicinal product), but these are not that relevant for software.} The classification in these classes is done while: `\emph{taking into account the intended purpose of the devices and their inherent risks}'.\footnote{Art 51(1) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} In general, risk is based on the probability of occurrence of harm and the consequences of that harm.\footnote{See for example the ISO 14971 standard for more details on QMS for medical devices.} This means that devices are classified higher in accordance with the level of the risk related to its intended purpose. Class I devices are low risk devices, where the manufacturer can declare the conformity with the requirements of the Regulation under its own responsibility and, in general, no notified body is involved.\footnote{There is an exception for sterile class I products for which the involvement of a notified body is required.} Recent jurisprudence by the ECJ confirms that the risk related to intended medical purpose is the guiding principle for classification.\footnote{\protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{Minssen, Mimler and Mak}, \protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{(n 7)}.}

Class IIa-III devices require a certificate of conformity issued by a notified body for which the requirements depend on the class and specifics of a device. The requirements per class are further discussed after rules for classifying software are analysed.

A general rule is that when there are multiple devices or modules that together form a device are considered, then the \emph{'strictest rules resulting in the higher classification shall apply}'.\footnote{Annex IX, II, 2.3 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{(n 23)}.}

\hypertarget{hardware-vs-software-based-classification}{%
\subsection{Hardware vs software based classification}\label{hardware-vs-software-based-classification}}

In this section we answer the question how software is classified under the Directive and under the Regulation, whether we should distinguish between SiMD and SaMD and if there is any indication that `AI' is classified any different compared to `traditional' software. This is done by comparing the Directive to the Regulation, which is where we identify a difference in approach. Where the Directive takes what we call a `hardware-based' approach, the Regulation takes a `software-based' approach.

\hypertarget{medical-device-directive}{%
\subsubsection{Medical device directive}\label{medical-device-directive}}

As a general rule of classification the Directive states that: `\emph{application of the classification rules shall be governed by the intended purpose of the devices}',\footnote{Annex IX, II, 2.1 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} which is the case irrespective of whether it concerns a device consisting of software, hardware or both. Embedded software is classified in accordance with the hardware medical devices it is embedded in.\footnote{Annex IX, II, 2.3 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} However, for classifying stand alone software under the Directive it is important to note that software is an `active device'. We will first discuss how an active device is defined, after which we will go into the criteria in the Directive that determines the applicability and the classification of software.

\hypertarget{active-device-classification}{%
\paragraph{Active device classification}\label{active-device-classification}}

Stand alone software `\emph{is considered to be an active medical device}',\footnote{Annex IX, II, 1.4 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} which entails some additional classification rules, but also means that stand alone software can be classified on its own, without a hardware medical device necessary. Section 3 contains additional rules for active devices. When an active device administers of exchanges energy it is classified as Class IIa or Class IIb depending on the nature, density and site of application of the energy. When an active device controls or monitors the performance of an active therapeutic device of Class IIb, it has the same classification.\footnote{Annex IX, III, 3.1 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} It classifies devices which are intended for diagnostic purposes based on whether they administer, supply or exchange energy, image radiopharmaceuticals \emph{in vivo}, administer or remove medicines, emit ionising radiation or allow direct diagnosis or monitoring of vital physiological processes.\footnote{Annex IX, III, 3.2 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} For stand alone software only the last one is relevant given that the others all require some hardware medical device component on which the classification would be based.

\hypertarget{drive-a-device-or-influence-its-use}{%
\paragraph{Drive a device or influence its use}\label{drive-a-device-or-influence-its-use}}

In addition, it is clear from the Directive that `\emph{Software, which drives a device or influences the use of a device, falls automatically in the same class}'.\footnote{Annex IX, 2.3 \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{EC}, \protect\hyperlink{ref-ecCOUNCILDIRECTIVE931993}{ibid}.} For SiMD this makes clear how it should be classified, as any embedded software `\emph{drives a device}'. However, it is not immediately evident what this implies for SaMDs, or more standalone software, which communicates with a device. The crux herein is what is meant by `\emph{influences the use of a device}'.

The above indicates that when software `\emph{influences the use of a device}' that it is part of that device could increase the scope of software considered as a medical device if it would be said that software that influences medical decision making and in doing so potentially influencing the physician's decision to use a medical device, would lead to a conflict for software for general purposes used in a healthcare setting, that are explicitly excluded from the scope but evidently do influence medical decision making.\footnote{Preamble 19 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.}

\hypertarget{hardware-based-approach}{%
\paragraph{Hardware-based approach}\label{hardware-based-approach}}

The Directive classifies embedded software, or SiMD, based on the physical medical device. Therefore, the intended medical purpose of the medical device is the relevant factor in classifying these devices and the embedded software. Standalone software is classified as a class I device given that none of the rules lead to a different class when the device has no hardware component.\footnote{Annex IX, 3.3, rule 12 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Given the time frame in which the Directive came into existence, the classification of standalone software in a low class may not come as a big surprise, given that software was less prevalent in a medical context than it is today.

\hypertarget{medical-device-regulation}{%
\subsubsection{Medical device regulation}\label{medical-device-regulation}}

The new medical device Regulation specifically mentions software in its preamble where it clarifies that software confirms to the definition of a medical device that it qualifies as a medical device in its own right. This is a clarification compared to the original Directive, but not a change from the Directive after its 2007 amendment. In this section we assess whether the classification of software, more specifically standalone software, has changed and what the consequences are thereof.

\hypertarget{classification}{%
\paragraph{Classification}\label{classification}}

The regulation states that `\emph{the qualification of software, either as a device or an accessory, is independent of the software's location or the type of interconnection between the software and a device}'.\footnote{Preamble 19 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The Regulation, just like the Directive, considers software to be an active device,\footnote{Art 2(4) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} and states that `\emph{software, which drives a device or influences the use of a device, shall fall within the same class as the device}'.\footnote{Annex VIII, II, 3.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The Regulation states that \emph{'if the software is independent of any other device, it shall be classified in its own right}'.\footnote{Annex VIII, II, 3.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

The rules for the classification of active devices, which includes software, has many similarities when comparing the Regulation to the Directive. The rule for the classification of active devices controlling other (non-active) devices is similar,\footnote{Annex VIII, rule 9 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} as is the rule concerning active devices (including software) that supply energy, do \emph{in vivo} imaging of radiopharmaceuticals or exchange of energy, emitting ionising radiation, administer/remove medicines.\footnote{Annex VIII, rule 10 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Another rule concerns active devices that administer or remove medicinal products or similar substances from the body. Although this rule is not very relevant for stand alone software because it cannot perform such physical acts without a hardware component. That would have to be part of that medical devices, as implied by the guidance on rule 12 by the MDCG.\footnote{MDCG rule 12 page 14.} However, there is one new rule in the Regulation that changes the classification of software considerably compared to the Directive.

\hypertarget{software-based-approach-to-classification}{%
\paragraph{Software-based approach to classification}\label{software-based-approach-to-classification}}

The Regulation has introduced a new rule 11 that contains an important clarification related to `\emph{software intended to provide information which is used to take decisions with diagnosis or therapeutic purposes}'. This software is classified in class IIa or even higher depending on the seriousness of the impact that the decisions that the devices provide information on.\footnote{These devices are `\emph{classified as class IIa, except if such decisions have an impact that may cause: death or an irreversible deterioration of a person's state of health, in which case it is in class III; or a serious deterioration of a person's state of health or a surgical intervention, in which case it is classified as class IIb}'.\footnotemark{}} To clarify the exact meaning of `\emph{to provide information which is used to take decisions with diagnosis or therapeutic purposes}' is, we look at the guidance documents that are available.

According to the Regulation, the European Commission can decide, through implementing acts and after consulting the MDCG, on the application of the classification rules in Annex VIII.\footnote{Art 51(2) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Currently, the Commission has created one implementing act on single use devices. However, the MDCG expert group on new technologies has released a guidance document relevant to the classification rules of software. It should be noted that this guidance is not legally binding.

\hypertarget{the-mdcg-on-medical-device-software-mdsw}{%
\paragraph{The MDCG on medical device software (MDSW)}\label{the-mdcg-on-medical-device-software-mdsw}}

The MDCG has the following to say on the software classification rule 11 in the Regulation: `\emph{The wording ``intended to provide information which is used to take decisions with diagnosis or therapeutic purposes'' describes, in very general terms, the ``mode of action'' which is characteristic of all MDSW. Therefore, this sub-rule is generally applicable to all MDSW (excluding those MDSW that have no medical purpose)}'.\footnote{\protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{MDCG}, \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{(n 32)} 13} The MDCG use the abbreviation `MDSW' for medical device software, which it defines as follows: '\emph{Medical device software is software that is intended to be used, alone or in combination, for a purpose as specified in the definition of a ``medical device'' in the medical devices regulation or in vitro diagnostic medical devices regulation'}.\footnote{\protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{MDCG}, \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{ibid} 6}

While there are products without a medical purpose that are within the scope of the Regulation,\footnote{Art 1(2) jo. Annex XVI \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'} (n 21)}.} meaning that the first sub-rule of rule 11 is not applicable for software used in those devices, the definition of MDSW by the MDCG specifically refers to the definition of a `medical device', not more generally to products that are within the scope of these Regulations. Because the different purposes specified in the definition of a medical device are all medical purposes, MDSW has a medical purpose by definition.\footnote{Art 2(1) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

As the MDCG has defined MDSW as including both stand alone software and embedded software, what the MDCG is essentially saying is that this part of rule 11 is applicable to all medical devices that have any software. This means that all software is class IIa by default and class IIb or class III if the requirements for one of the two exceptions are met. Evidently this is a very peculiar choice by the MDCG, because the consequence is that software is no longer only classified based on the intended medical purpose and the corresponding risk but based on the choice of implementing the device in hardware or in software. An additional fact that shows the peculiarity of the MDCG's interpretation is that it makes the third sub-rule of rule 11 redundant given that there is no other software to consider when every software is covered by the first sub-rule.

\hypertarget{an-example-of-the-software-based-approach}{%
\paragraph{An example of the software-based approach}\label{an-example-of-the-software-based-approach}}

Lets illustrate this by an example. The classification of a relatively simple medical device such a thermometer would differ depending on the implementation. An old mercury thermometer would be a class I device, should the manufacturer use an implementation using electrical components without a computation module such as a microcontroller than it would still be a class I device, but the moment that the sensor is read by such a module and software is used, such a device would be a class IIa device. As there is no reason to assume a higher risk for a software implementation in this case, this shows that the interpretation of the MDCG diverts from the principle that classification is based on the intended medical purpose and associated risk. As such, this interpretation of rule 11 is only really fitting for higher class and thus higher risk software, which currently is the exception.

\hypertarget{classifying-software}{%
\subsection{Classifying software}\label{classifying-software}}

In summary, the classification is risk based, where risk consist of the probability of harm occurring and the consequences of the harm done should it occur.

Whereas the Directive takes a `\emph{hardware-based approach}', meaning that it is the hardware medical device that leads to a certain classification. The crux is the line of `\emph{Software, which drives a device or influences the use of a device, falls automatically in the same class'}. In the Directive, a 'true' SaMD, meaning truly standalone software without any connection to a hardware medical device, is classified in class I. The Directive only leaves room for higher classification of software in case there is a hardware medical device that requires this higher class.

The Regulation, in part due to its guidance document, takes a `\emph{software-based approach}'. The relevant classification rule is to classify `\emph{software intended to provide information which is used to take decisions with diagnosis or therapeutic purposes}' through a newly introduced rule 11. This essentially does away with classification of software in relation to the hardware it is embedded in or connected to.\footnote{There does not seem to be a realistic product where the software would have a IIa classification while the hardware component makes it a class IIb or III device.} The result is that utilising any form of software under the Regulation, using the guidance by the MDCG, results in a higher classed device regardless of risk.

In conclusion, neither the Directive nor Regulation is fully following its risk-based classification paradigm. In both, the implementation method can dictate classification regardless of the implications it has for the risks related to the device. So far there is no indication of a reason why there is this deviation from that principle in the classification of software specifically. After it is established that software is within the scope of the Directive/Regulation and acknowledging that stand alone software constitutes a medical device, it seems unnecessary to base the classification on whether the implementation is done through software. However there may be implications resulting from the requirements that could explain this approach for software.

\hypertarget{requirements-for-the-different-classes-of-software}{%
\section{Requirements for the different classes of software}\label{requirements-for-the-different-classes-of-software}}

The Regulation leads to a higher classification for standalone software compared to the Directive. Therefore, it is important to assess the consequences of a higher classification for medical device software under the Medical Device Regulation. The assessment is subdivided in an analysis of the required certificates per class, the general requirements that are relevant for software, and (in section \protect\hyperlink{sec:Certificates-in-the}{5}) the requirements for each certificate.\footnote{Only the requirements in Annex I apply to devices that are manufactured and used within health institutions and the conditions mentioned in are met.}

\hypertarget{requirements-per-class}{%
\subsection{Requirements per class}\label{requirements-per-class}}

The different procedures and requirements for the different classes of medical devices are in different Annexes in the Directive and the Regulation. As discussed above, medical devices are classified into one of 4 classes: class I, IIa, IIb and III.\footnote{Art 51(1) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} The Annexes that are applicable per class are given in article 52 of the Regulation, see table \protect\hyperlink{tab:Annexes-per-class}{1}.\footnote{Art 52 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

\hypertarget{tab:Annexes-per-class}{}
\begin{longtable}[]{@{}lll@{}}
\caption{Articles indicating the Annexes per class of medical device\protect\hypertarget{tab:Annexes-per-class}{}{tab:Annexes-per-class}}\tabularnewline
\toprule
Class & Directive & Regulation \\
\midrule
\endfirsthead
\toprule
Class & Directive & Regulation \\
\midrule
\endhead
I & 11(5) & 52(7) \\
IIa & 11(2) & 52(6) \\
IIb & 11(3) & 52(4) \\
III & 11(1) & 52(3) \\
\bottomrule
\end{longtable}

Considering that the relevant annexes contain long lists of requirements where it is not immediately clear to which class these apply, we will first consider the necessary declaration or certificates for each class. While these certificates need to be issued before a medical device can go to market, higher classed devices require ongoing oversight on the compliance of the manufacturer and products with the certificates that were issued, which is discussed in conjunction with those specific certificates.

\hypertarget{class-i}{%
\subsubsection{Class I}\label{class-i}}

The requirements for the technical documentation are given in Annex II and Annex III indicate that the post-marketing surveillance is documented by the manufacturer. All Medical devices need to comply with both of these Annexes.\footnote{Art 10, Annex II, Annex III \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The requirements for class I devices can be met by a manufacturer without the need for involving an external party. It requires a declaration of conformity made by the manufacturer in which it declares that it has a technical documentation and quality management system, which are compliant with the requirements in the Regulation.\footnote{Art 52 (7) jo. art 19, Annex IV \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For sterile devices that are a subcategory of class I devices there is an assessment of the compliance with the Regulation by a notified body, which leads to a certificate as a basis for market access.

\hypertarget{class-iia}{%
\subsubsection{Class IIa}\label{class-iia}}

Devices of class IIa and higher require a certificate in addition to the declaration of conformity.\footnote{Art 10(6) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Notified bodies issue these certificates for which Annex XII contains the general requirements and minimum content.\footnote{Annex XII \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For devices in class IIa there are two options for obtaining a certificate of conformity.\footnote{Art 52(6) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The first option requires a technical document assessment certificate (TD-certificate)\footnote{Art 52(6) jo. Annex IX, section 4, 4.9 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} and a quality management system certificate (QMS-certificate).\footnote{Annex IX, chapter I, 2.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The second option is a quality assurance certificate (QA-certificate)\footnote{refers to `\emph{a certificate pursuant to this Part of this Annex}' which according to is an `\emph{EU quality assurance certificate}'.} or a product verification certificate (PV-certificate).\footnote{refers to `\emph{a certificate pursuant to this Part of this Annex}' which according to is an `\emph{EU product verification certificate}'.} In addition, the second option requires the presence of the technical documentation (TD-certificate) and quality management system certificate (QMS-certificate) as prescribed by those respective certificates.

\hypertarget{class-iib-iii}{%
\subsubsection{Class IIb-III}\label{class-iib-iii}}

Class IIb and III devices require a different mix of certificates compared to class IIa devices. Like class IIa, manufactures have a choice between two options for obtaining a certificate of conformity for class IIb and III devices.\footnote{Art 52(4) \& 52(3) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)} respectively.} The first option is a EU quality management system certificate (QMS-certificate)\footnote{Annex IX, chapter I, 2.3 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} and an EU technical documentation assessment certificate (TD-certificate).\footnote{Annex IX, chapter II, 4 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The second option is an EU type-examination certificate (TE-certificate)\footnote{Annex X \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} in combination with either an EU quality assurance certificate (QA-certificate)\footnote{Annex XI, part A, 6.3 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} or an EU product verification certificate (PV-certificate).\footnote{Annex XI, part B, 15.2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

\begin{longtable}[]{@{}lcccll@{}}
\caption{Certificate per class}\tabularnewline
\toprule
& Documentation & Design / Production & Product & & \\
\midrule
\endfirsthead
\toprule
& Documentation & Design / Production & Product & & \\
\midrule
\endhead
I & declaration & declaration & & & \\
IIa & TD\textsuperscript{1,2} & QMS\textsuperscript{1,2} & TE\textsuperscript{2} & QA\textsuperscript{2} & \\
IIb & TD\textsuperscript{1,2} & QMS\textsuperscript{1,2} & TE\textsuperscript{2} & QA\textsuperscript{2} & \\
III & TD\textsuperscript{1,2} & QMS\textsuperscript{1,2} & TE\textsuperscript{2,3} & QA\textsuperscript{2} & PV\textsuperscript{3} \\
\bottomrule
\end{longtable}

\hypertarget{subsec:GSPR}{%
\subsection{General safety and performance requirements (GSPR)}\label{subsec:GSPR}}

Given the objective of the Regulation to ensure that patients have access to safe and performant devices, all devices must meet the general safety and performance requirements (GSPR) in Annex I,\footnote{Art 5(2) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} including software. The GSPR state that \emph{'Devices shall achieve the performance intended by their manufacturer and shall be designed and manufactured in such a way that, during normal conditions of use, they are suitable for their intended purpose}'.\footnote{Annex I, Chapter 1, 1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The GSPR aim to reduce risks as far as possible without adversely affecting the benefit-risk ratio.\footnote{Annex I, Chapter 1, 2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The requirements in the GSPR concern the documentation, risk management system, design, manufacturing and the information to be supplied with the device.\footnote{Annex I \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} As these are general requirements, the different certificates discussed in section \protect\hyperlink{sec:Certificates-in-the}{5} contain more detailed and comprehensive requirements.

\hypertarget{safety-and-performance-of-software}{%
\subsubsection{Safety and performance of software}\label{safety-and-performance-of-software}}

The (clinical) performance of software is the ability of a device to achieve its intended purpose.\footnote{Art 2 (12), 2 (22) \& 2 (52) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}\footnote{Art 2 (12) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} To establish the performance of a device there needs to be sufficient clinical evidence of whether the device is safe and its performance towards achieving the intended purpose.\footnote{Art 2 (53) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For software this means that it needs to be properly designed, with specifically considering that it has a proper connection system and sufficient interoperability.\footnote{Annex I, 14.1, 14.2 \& 14.5 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Software must be designed taking into account specific features of the platform and external factors related to its use.\footnote{Annex I, 17.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The software should reduce risk by design as much as reasonably possible. This includes that the IT environment in which the software operates must allow its proper functioning.\footnote{Annex I, 14.2(d) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The IT environment includes the hardware, network and security that are used.\footnote{Annex I, 17.4 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} When designing a device the manufacturer should take the technical knowledge of the user into account, including this as part of its validation process.

Software that performs a diagnostic or measuring function must be designed and verified to have sufficient accuracy, precision and stability by using the appropriate scientific and technical methods.\footnote{Annex I, 15.1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The design, verification and validation are aimed at eliminating or at least reduce risks related to use error.\footnote{Annex I, 5 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} In addition, the risk of side-effects needs to be minimised, which for software means reducing bugs as much as possible.\footnote{Annex I, 8 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} From this it follows that the risk of applying software or AI outside of their intended use case should be prevented by design. As such there needs to be a system in place to assess the quality of the device on these aspects.

\hypertarget{quality-management-for-software}{%
\subsubsection{Quality management for software}\label{quality-management-for-software}}

There must be a quality management system that provides guarantees that the software is `\emph{designed to ensure repeatability, reliability and performance in line with their intended use}'.\footnote{Annex I, 17.1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} These quality management processes are very important in in software development for obtaining the desired repeatability, reliability and performance. As such, quality is a combination of these three aspects. Looking at performance there are different performance metrics, the choice of an appropriate measure is very important. The MDCG has divided the performance into different categories. The technical or analytical performance is based on evidence generated during verification and validation (part of GMP) or by new evidence through new data(sources).\footnote{\protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{MDCG}, \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{(n 32)}.} The clinical performance, in essence some descriptive statistics coming from either prospective or retrospective studies depending on the context.\footnote{\protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{MDCG}, \protect\hyperlink{ref-mdcgGuidanceClinicalEvaluation2020}{ibid}.}

Therefore, the Regulation's general requirements concerning risk management and risk control measures are very relevant for software.\footnote{Annex I, 3-4 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} Specific requirements for software are that it is developed and manufactured according to the state of the art concerning principles of development life cycle, risk management, verification and validation.\footnote{Annex I, 17.2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The first two are quite self explanatory, but the verification and validation require some further detailing in the context of software. Given that it is an explicit requirement for the TD-certificate, the verification and validation are further discussed there.

\hypertarget{sec:Certificates-in-the}{%
\section{Certificates in the Medical Device Regulation}\label{sec:Certificates-in-the}}

There are essentially two requirements for every class of device for EU market access: the declaration of conformity and one or more certificates for a device higher than class I. The certificates are issued by a notified body according to article 56, for which Annex XII contains the general requirements and minimum content.\footnote{Annex XII \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

\begin{longtable}[]{@{}lcl@{}}
\caption{Annexes on Conformity Assessment}\tabularnewline
\toprule
Annex & Certificates & \\
\midrule
\endfirsthead
\toprule
Annex & Certificates & \\
\midrule
\endhead
IX & QMS (chapter 1) & TD (chapter 2) \\
X & TE & \\
XI & QA = QMS + TD & PV \\
\bottomrule
\end{longtable}

\hypertarget{declaration-of-conformity}{%
\subsection{Declaration of conformity}\label{declaration-of-conformity}}

The declaration of conformity is drawn up by the manufacturer. A declaration of conformity is a document in which the manufacturer declares that the product complies with the EU requirements and take full responsibility of the product's compliance with the applicable EU law.\footnote{\protect\hyperlink{ref-TechnicalDocumentationEU}{{`Technical Documentation and {EU} Declaration of Conformity'}}, \protect\hyperlink{ref-TechnicalDocumentationEU}{(\emph{Your Europe - Business}) \textless{}\url{https://europa.eu/youreurope/business/product-requirements/compliance/technical-documentation-conformity/index_en.htm}\textgreater{} accessed 4 September 2020}.}

For higher class devices it is part of the assessment done by the notified body where it is, among other things, a basis for a QMS-certificate, QA-certificate and PV-certificate.\footnote{Art 10(6); Annex IX, 2.1 and Annex XI, 5 \& 11 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} Concretely, the requirement for safety and clinical performance is reflected in the Annex I, 23.4 jo. article 32 of the medical device Regulation where it requires the performance characteristics and the degree of claimed accuracy to be part of the device's documentation.

\hypertarget{eu-technical-documentation-assessment-certificate-td-certificate}{%
\subsection{EU technical documentation assessment certificate (TD-certificate)}\label{eu-technical-documentation-assessment-certificate-td-certificate}}

Every product must have a technical documentation as per Annex II (technical documentation) and Annex III (technical documentation on post-market surveillance),\footnote{Art 52 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} the specific requirements depend on the class of the device.\footnote{Annex IX, 5 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} However, an assessment as per Annex IX, chapter II, is only required for class IIb \& III medical devices. For these devices the manufacturer lodges an additional application for the assessment of the documentation which describes the design, manufacture and performance of the devices.\footnote{Annex IX, chapter II \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The technical documentation can include the claim that the device is equivalent to another device, which the notified body has to verify.\footnote{Annex IX, 4.5 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The notified body also needs to verify that the clinical evidence and the clinical evaluation support the claims of the manufacturer and the conclusions it has drawn from them.\footnote{Annex IX, 4.6 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Based on the clinical evidence, the notified body will consider the benefit-risk determination in the Technical Documentation\footnote{Annex II, 5 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} and will define specific milestones to update the review of the clinical evidence when more evidence becomes available.\footnote{Annex IX, 4.7 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} If all the requirements concerning the technical documentation are fulfilled then the notified body must issue an EU technical documentation assessment certificate.\footnote{Annex IX, 4.10 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

For a TD-certificate, the technical documentation requires information of the intended patient population and medical conditions to be diagnosed, treated and/or monitored by the device.\footnote{Annex II, 1.1(c) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} This is especially relevant for AI software where usage outside of the intended population or function can bring robustness issues to light. To support the ability to assess this, the documentation needs to explain the principles of operation,\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Hamon and others (n 3) 24}.} where the validity and appropriateness of these principles needs to be scientifically demonstrated\footnote{Annex II, 1.1(d) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'} (n 21)}.} By documenting the general description of key functional elements, which explicitly includes software, it can be assessed whether classification was done properly and whether the necessary element are present to support operations in accordance with the previously mentioned principles of operation.\footnote{Annex II, 1.1(j) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The manufacturer must mention previous and similar devices produced and/or available on the market.\footnote{Annex II, 1.2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} This is relevant as an indication of the risk and available experience with these types of product, but also in the assessment of software modification as will be discussed later.

\hypertarget{specific-requirements-for-software}{%
\paragraph{Specific requirements for software}\label{specific-requirements-for-software}}

The Technical Documentation must contain detailed information on testing methodology, methods of data analysis and test conclusions regarding software verification and validation. The information for software verification and validation describes `\emph{the software design and development process and evidence of the validation of the software, as used in the finished device.}'\footnote{Annex II, 6.1(b), point 3 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Additionally, the Technical Documentation must contain '\emph{information to allow the design stages applied to the device to be understood'},\footnote{Annex II, 3(a) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} which is particularly relevant for AI models given that it obligates the manufacturer to show how it designed the model.

Verification and validation are two closely related, but distinct, parts of the quality control process when engineering complex systems.\footnote{\protect\hyperlink{ref-vogelMedicalDeviceSoftware2011}{David A Vogel}, \protect\hyperlink{ref-vogelMedicalDeviceSoftware2011}{\emph{Medical Device Software Verification, Validation and Compliance} ({Artech House} 2011) \textless{}\url{http://site.ebrary.com/id/10436227}\textgreater{} accessed 9 September 2020} 77} Software verification concerns the process of answering the question whether the software conforms to its specification. This is different from software validation, which is answering the question whether the software does what the user wants. The technical documentation \emph{`should typically include the summary results of all verification, validation and testing performed both in-house and in a simulated or actual user environment prior to final release'.}\footnote{Annex II, 6.1(b), point 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'} (n 21)}.} In doing this the manufacturer should consider that its verification and validation procedures \emph{'address all of the different hardware configurations and, where applicable, operating systems identified in the information supplied by the manufacturer)}'.\footnote{Annex II, 6.1(b), point 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

Obviously, the validation and verification of complex systems, including software, is difficult. The complexity increases with the number of configurations or variables that need to be considered. More so when the dynamics of a changing model add to the number of variables in a system. The latter is essentially what is so challenging about validating AI. This requires extensive testing, among other things,\footnote{\protect\hyperlink{ref-vogelMedicalDeviceSoftware2011}{Vogel (n 125) 75}.} to ensure the robustness of the model and further developments in formal verification, a field of computer science which aims to mathematically proof the correctness of software.\footnote{\protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{Hamon and others}, \protect\hyperlink{ref-hamonRobustnessExplainabilityArtificial2020}{(n 3)} 18-19} While verification is within the context of a training dataset and test dataset is common practice and allows to verify that an AI model performs according to the specification. The generalisability thereof to real world use is not necessarily proven through that method. Consequently, the most challenging part is the validation, which is due to the many variables in a model and the variability of the input data, it is difficult to predict the effect of small changes in the model or input data.

While verification is possible based on the available data,\footnote{Using reasonably sized training, test and validation subsets.} the results of this verified model may not be robust when applied on new data or cases. The `validation' of AI models remains an open challenge and one of the reasons why the explainability and interpretability of these models is important as this allows better reasoning on the different aspects of the `\emph{quality}'\footnote{I.e. the repeatability, reliability and performance in line with the intended use.} of these models.

There is one relevant provision in in Annex III describing the post market surveillance plan for software. This plan should include a process for assessing and acting upon collected data, by using suitable indicators and analysis of statistically significant increase in one or more of the aspects of incidents reported.\footnote{Annex III, 1.1(b) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.}

\hypertarget{additional-requirements-for-class-iib-iii-devices}{%
\paragraph{Additional requirements for class IIb-III devices}\label{additional-requirements-for-class-iib-iii-devices}}

There are additional requirements for the technical documentation for class III and some class IIb devices.\footnote{Annex IX, 5 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For these devices the notified body will create a clinical evaluation assessment report for the Commission, which will refer this to the relevant expert panel. The expert panel has the choice to formulate a scientific opinion in which it reviews the report made by the notified body. In this opinion, the expert panel can advice the notified body of required changes.\footnote{Annex IX, 5.1(g) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

\hypertarget{eu-quality-management-system-certificate-qms-certificate}{%
\subsection{EU quality management system certificate (QMS-certificate)}\label{eu-quality-management-system-certificate-qms-certificate}}

Article 10 establishes the obligation for manufacturers of any device to establish and implement a quality management system.\footnote{Art 10(9) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For higher class devices the quality management system needs an assessment by a notified body for which the manufacturer has to lodge the application.\footnote{Annex IX, 2.1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The required documentation primarily concerns the business organisation, the techniques that are used to monitor, verify and control the design of the devices and the corresponding documentation. The notified body will audit the quality management system and corresponding documentation. If it conforms to the relevant provision, the notified body will issue an EU quality management system certificate.\footnote{Annex IX, 2.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

While the Regulation requires a surveillance plan for all classes,\footnote{Art 83-84 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} for medical devices higher than class I, the notified body must perform surveillance and periodic (unannounced) audits of the approved quality management system to ensure that the obligations therein are fulfilled.\footnote{Annex IX, 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} Related to this is the obligation of manufacturers to create a periodic safety update report (PSUR) for class IIa-III devices.\footnote{Art 86 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

Art 10(9) delineates some specific requirements concerning the quality management system, the regulatory compliance, general safety and performance requirements, responsibility, risk management, information concerning product development and manufacturing, clinical evaluation, verification, post-market surveillance, handling of communications, vigilance, managements of corrective action and monitoring of output in light of data analysis and product improvement.\footnote{Art 10(9) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

Part of the QMS-certificate is the obligation for manufacturers to provide access to technical documentation as referred to in Annexes II and III. Other requirements are that the obligations resulting from the quality management system are fulfilled, that post-market surveillance is conducted and that (documentation of) the clinical evaluation plan is kept up to date. According to Annex IX, the documentation used to asses the quality management system includes the quality objectives,\footnote{Annex IX, 2.2(a) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} a description of the organisation of business relevant to the design, manufacturing and verification of a product and the procedures and techniques that are used to monitor, verify, validate and control the design of the device.\footnote{Annex IX, 2.2(b-c) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The documentation requires the manufacturer's quality objectives, a description of the organisation and business, procedures and techniques for monitoring, verifying validating and controlling the design of devices. Importantly, it requires a description of the verification and quality assurance techniques including the appropriate tests and trials to be conducted before, during and after manufacturing.\footnote{Annex IX, 2.2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

There is an obligation for the notified body to audit whether the quality management is compliant with the regulatory requirements.\footnote{Annex IX, 2.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For class III \& some IIb the QMS certificate has the additional requirement of an assessment of the technical documentation for devices selected on a representative basis in accordance with Annex IX, chapter II.

Evidently, the Regulation requires a quality management system for software to assure regulatory compliance in the the design, manufacturing, validation and verification of that software.\footnote{For example the ISO 14971 standard provides further guidance, although this is not within the scope of this article.} While there is guidance available on for example the software for quality management systems for medical devices,\footnote{ISO/TR 80002-2:2017} there are no explicit requirements specifically for the quality management systems concerning software.

\hypertarget{subsec:Type-examination}{%
\subsection{EU Type-examination certificate (TE-certificate)}\label{subsec:Type-examination}}

For an EU type examination the notified body certifies that the device fulfils the relevant provisions in the Regulation. This includes the technical documentation, processes that are relevant during the life cycle of the device and looking at a representative sample of the device produced as envisaged.\footnote{Annex X, 1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} The manufacture needs to lodge an application with a notified body of choice, but needs to declare any other applications it has filed and provide information concerning these applications if applicable.\footnote{Annex X, 2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The notified body will assess whether the device is in conformity with the requirements of the Regulation and whether the type is manufactured according to the corresponding technical documentation.\footnote{Annex X, 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} If applicable, the notified body needs to carry out or arrange the appropriate assessments and tests that are necessary to verify that the general safety and performance requirements are met.\footnote{Annex X, 3 (f) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} If the type conforms to the regulatory requirements then the notified body will issue a TE-certificate.\footnote{Annex X, 4 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

For some higher class devices that are based on their type have a higher risk, the notified body must submit a clinical evaluation report to the European Commission, which will refer this to the appropriate expert panel for evaluation.\footnote{Art 54(4) jo. annex IX, 5.1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} For certain class IIb-III devices, the manufacturer is given the ability to consult an expert panel,\footnote{Art 61(2) \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} which are part of the MDCG and work under supervision of the European Commission.\footnote{Art 106 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} A TE-certificate requires review of the clinical evidence which means clinical data and clinical evaluation results that show the safe and that it achieves its intended clinical benefits.\footnote{Annex X, 3(c) jo. art 2(51) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The manufacturer must assess the evidence in a clinical evaluation, where it assess the conformity of the clinical evidence to the requirements in Annex I.\footnote{Art 61 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} While the requirements are applicable to aspects of software development and software products, there are no specific requirements for software concerning a TE-certificate.

\hypertarget{eu-quality-assurance-certificate-qa-certificate}{%
\subsection{EU quality assurance certificate (QA-certificate)}\label{eu-quality-assurance-certificate-qa-certificate}}

The QA-certificate is a step up from the QMS-certificate as it requires that the approved quality management system is implemented and verified. As such, a QA-certificate requires essentially all of the elements that are required for a QMS-certificate,\footnote{Annex XI, 6 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} except for 2.2(c) which concerns the procedures and techniques for verification and is thus covered by the requirements for QA-certificate instead.\footnote{Annex XI, 6.2 jo. Annex IX, 2.2(d) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} One of the requirements is that the application for a QA-certificate includes the technical documentation as required by Annexes II \& III.\footnote{Annex XI, 6.1 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} The certificate is issued when the quality management system ensures that the devices described in the TE-certificate conform to the requirements in the regulation. To assert that the requirements are met, notified bodies carry out surveillance, including (un)announced onsite audits and the assessment of information in the quality management system, documentation, data related to the design, tests and records of the qualifications of personnel and quality control reports.\footnote{Annex IX, 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

While the quality assurance certificate has no specific requirements for software, given the importance of quality assurance of software, it is very relevant for the quality management system and general requirements of Annex I as relevant for software.

\hypertarget{product-verification-certificate-pv-certificate}{%
\subsection{Product verification certificate (PV-certificate)}\label{product-verification-certificate-pv-certificate}}

The objective a product conformity verification has is to assess that a device conforms to the type for which an EU type-examination certificate has been issued (see \protect\hyperlink{subsec:Type-examination}{subsec:Type-examination}) This is an extra check on the work done by the notified body in issuing the EU type-examination. Other than the QA-certificate, a PV-certificate concerns each individual product contrary to the production process.\footnote{Annex XI, 15 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} As such, it is not that relevant for software, where the verification is done on the `design' of the software. The product verification of every device is an easy requirement to meet for software given that copying software is highly reliable and can be easily checked through a checksum that guarantees that the `software' is copied as intended.

Therefore, the PV-certificate has no specific requirements for software. The product verification for a PV-certificate essentially concerns the hardware aspects of the device, but is not that relevant for software.

\hypertarget{certificate-of-free-sale}{%
\subsection{Certificate of free sale}\label{certificate-of-free-sale}}

The certificate of free sale is a certificate that is issued by the Member States in which the manufacturer or authorised representative has its registered place of business for a device that is in accordance with the Regulation.\footnote{Art 60 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} As its name implies this certificate allows the free sale of a device with the European Economic Area (EEA).\footnote{Further details on this certificate are not within the scope of this article.} A free sales certificate requires that the device bears a CE marking and that the manufacturer or authorise representative has its registered place of business in a Member State.\footnote{Art 60 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} It contains the UDI-DI and the identification number of the certificate of conformity.\footnote{Art 60 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

\hypertarget{equivalence-procedure-and-common-specification-for-software}{%
\section{Equivalence procedure and Common Specification for software}\label{equivalence-procedure-and-common-specification-for-software}}

Having discussed the classification and associated procedure for the initial approval, we will now detail the relevant requirements that software and manufacturers need to fulfil for products that are modified.

\hypertarget{software-modification-and-the-equivalency-procedure}{%
\subsection{Software modification and the equivalency procedure}\label{software-modification-and-the-equivalency-procedure}}

As explained above, there is a distinction between the explicitly coded part of the algorithm and the resulting model. Also discussed before is the importance of software verification and validation, which is equally applicable to new/updated versions of software. Part of the QMS is aimed at handling modifications that aim to improve product quality. As the risk of modifications to a known quantity is generally lower compared to the risk of introducing a completely new product, the Regulation facilitates these modifications by reducing the requirements needed for approval of the new `version' through the \emph{equivalency procedure}.

Compared to regular software there is a component of AI models that can change without explicit human `input', i.e.~(re)training the model. This specific characteristic of AI software leads to the question whether training a model on new data and/or with adaptations to the model code encompasses a modification and whether this is a minor or major change.

A modification for a class IIb \& III device requires a clinical evaluation unless the notified body is satisfied \emph{`the device has been designed by modifying a device already marketed by the same manufacturer for the same intended purpose, provided that the manufacturer has demonstrated to the satisfaction of the notified body that the modifications do not adversely affect the benefit-risk ratio of the device\emph{'.\footnote{Art 54(2)(b) \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} A device is '}already marketed'} when it was approved under the Directive or the Regulation.\footnote{\protect\hyperlink{ref-mdcgInterpretationArticle542020}{MDCG}, \protect\hyperlink{ref-mdcgInterpretationArticle542020}{{`Interpretation of {Article} 54(2)b Rev 1'} (2020) 2019-3 \textless{}\url{https://ec.europa.eu/docsroom/documents/40661}\textgreater{}}.} For demonstrating equivalence, and thus be allowed to use existing clinical data for certification, the technical, biological and clinical characteristics of the devices are taken into account.\footnote{Annex XIV, part A, 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} As the biological aspects are not relevant and the clinical characteristics concern whether the device is used in the same clinical condition and purpose, the technical characteristics are important to consider for software.

Looking at the technical characteristics in the Regulation, the crux is in assessing whether the device is of `\emph{similar design}', which specifically mentions `software algorithms' as one of its properties.\footnote{Annex XIV, part A, 3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} This includes both software (algorithms) driving a device or when it is intended to be used alone.\footnote{\protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{MDCG}, \protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{{`Clinical {Evaluation} - {Equivalence}. {A} Guide for Manufacturers and Notified Bodies'} (2020) 2020-5} 6} The requirement of similar design is less strict for software that is not related to any medical purpose, for example the software responsible for the graphical user interface, which merely requires that it is justifiable that it does not negatively affect the usability, safety or clinical performance of the device.\footnote{\protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{MDCG}, \protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{ibid} 6} The guidance document specifically mentions that it is not required to demonstrate the equivalence of software code in case the software has been developed according to international standards for safe design and validation.\footnote{\protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{MDCG}, \protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{ibid} 6} Supporting this is that only a new Unique Device Identifier Production Identifier (UDI-PI), not a new Unique Device Identifier Device Identifier (UDI-DI), is required for minor software revisions. Major software changes require a new UDI-DI when the modifications affect the original performance, safety of the software or the interpretation of data.\footnote{Annex VI Part C, 6.5.2 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{(n 21)}.} These modifications include new or modified algorithms, database structures, operating platform, architecture or new user interfaces or new channels for interoperability.\footnote{Annex VI part C, 6.5.3 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'}}, \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.}

Looking at machine learning models, modifying the software code describing the model itself is clearly covered under the Regulation similar to conventional software. Albeit that as small changes in the training algorithm could have substantial hard to predict consequences, it is prudent that these kind of changes require additional clinical evaluation unless their effect is justifiably small. The aforementioned does raise the question whether (re)training of the model modifies the algorithm or whether this is merely a minor software revision.

Specifically looking at the wording of `software algorithm', retraining does not seem to fall under that definition given that the software code is equivalent in such cases. An argument against that is that the (re)trained model that is used for inference is likely different from the model that was originally trained. Regardless of whether it should be considered as the same device or as a modified device, the crux here is again the validation and verification of the performance and robustness of this software. In (re)training using approximately equivalent data would detrimentally affect performance, this raises the questions whether the model was sufficiently robust to begin with.

It is technically possible to automate parts of the verification software, which facilitates a bigger role for post-surveillance checks on data by ongoing verification of the performance of the algorithm. Although there is no reason to cut AI more slack in pre-approval evidence generation. If retraining is part of the plans for a device, manufacturers should make the necessary adaptations to their quality management system to ensure that this is possible without negatively impacting performance and with sufficient guarantees concerning robustness.

There are opportunities for data generation and verification post-market by using the technical documentation and imploring the sharing of data as a regulatory requirement. The Medical Device Regulation encourages the establishment of clinical data registries,\footnote{Art 108 \protect\hyperlink{ref-REGULATIONEU2017a}{ibid}.} which considering the importance of data for software and more specifically training AI models, offers further opportunity to use this data for improving medical devices. Using data from similar devices is possible even when it is not sufficient to demonstrate equivalence. It can then be used for ensuring the risk management system, the scope of the clinical evaluation through identification of special performance or safety concerns, provide information for the post-market surveillance system, identifying relevant clinical outcome parameters and minimal requirements for assessing a clinically relevant effect.\footnote{\protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{MDCG}, \protect\hyperlink{ref-mdcgClinicalEvaluationEquivalence2020}{(n 171)} 14}

Evidently, there is a balance to be struck between the free sharing of data and the commercial interest of manufacturers in that data. Also, setting up registries does require an investment, which may not materialise when the profitable to the investor inn setting up the registry is uncertain. Given that the EUDAMED database is yet to be implemented with the first module on actor registration planned for December 2021, it is clear that there are still technical barriers to the creation of a system where these heterogeneous data are easily shared.

\hypertarget{a-common-specification-or-future-amendments-for-ai}{%
\subsection{A Common Specification or future amendments for AI?}\label{a-common-specification-or-future-amendments-for-ai}}

There seems to be a general anticipation that the development of AI and machine learning will have major implications for regulatory frameworks. Specifically for medical devices, it has been stated that further amendments to the regulatory framework and guidelines for medical devices are required in the near future in light of advances in AI and machine learning.\footnote{\protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{Minssen, Mimler and Mak}, \protect\hyperlink{ref-minssenWhenDoesStandAlone2020a}{(n 7)}.} While we concur that more regulatory clarity concerning these technologies is warranted, it is unclear what the specific advances are that required addressing in regulatory amendments. Therefore, we present our view based on the perspective on AI as software that we have taken in this article.

In our analysis we have seen that the crux in regulating software in medical devices is the validation aspect. The question is whether the degree to which AI models can be validated is compliant with the regulatory requirements concerning robustness and efficacy in line with the benefit-risk of such software in medical devices. As such, there is a need for further technical guidelines. Whereas the necessity for further legal guidance is clear concerning software in general, it is not evident that AI or machine learning require a special treatment in the near future.

Given that the framework already delineates the requirements to which medical devices, software and consequently also AI have to conform, we argue that there is no evident need for legal interventions concerning those requirements specifically for AI models. We have yet to see a compelling argument that AI requires a total rethinking of the principles that are used to regulate medical devices nor that there are characteristics of AI up and beyond software that require special considerations.

While there is a potential for failure when AI models are retrained on new data and put into production unchecked, this is no different from other QA/QMS issues that can arise in software and even in traditional hardware devices. If new versions of software are pushed without validation or a new production process or material is used for a device, there is a need for a level of reassessment depending on the degree of the change and the risk that it entails. This make clear that the changes that are possible within the context of a validated product depend on the technical ability to perform the verification and validation of those changes in light of the requirements given by the applicable Regulations.

Software has a potential for faster, iterative, development and deployment. Verification is part of that process (CI \& CD). However, validation remains a concern. For AI, the lack of feature engineering, or the difference between explicit features and inference leads to difficulties in guaranteeing robustness. However, the regulatory requirements are clear that this robustness needs to be validated. Common specification is an instrument that can be used to state what the state of the art of verification and validation in relation to different AI models is.

AI models are too heterogeneous to come up with an exhaustive at this time and a topic that is continuously developing at a rapid pace. However, the Commission may create a common specification,\footnote{Art 54(2)(b) jo. art 9 \protect\hyperlink{ref-REGULATIONEU2017a}{{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'} (n 21)}.} which is an interesting option for regulating machine learning. While heterogeneity of the models can cause issues in creating a \emph{common} specification, we do like to make some general suggestions for some important elements that this common specification should address.

\begin{itemize}
\item
  The TD-certificate needs to contain detailed information on the design of a device. Applying this to AI models there should be an explanation of inner workings understandable by an expert in the field.
\item
  It should delineate standards for those elements in developing a model that are specific to AI. This includes the certain standard in the way that the data is prepared and handled. The standard needs to guarantee that when a dataset is split into different parts to be used for training, testing and validation that these are accidentally or\footnote{For example indicate whether the different parts of the dataset (training, test and validation) should be standardised separately or as a whole.}
\item
  There should be standards for accuracy and robustness. Preferably these are verifiable by the notified bodies or other external parties.
\item
  Clarification on how to deal with retraining. Either by having a QMS system that can deal with the variability introduced by retraining or by treating it as a modification of the device and apply the respective provisions in the Regulation to that change.
\end{itemize}

At this time, we argue that while software, specifically AI models, may be more complex or technically challenging, but this is not something for which the regulatory route is the best approach. Instead, using medical devices that involve software such as AI requires further developments in software validations in general and validation of AI models in particular.

\hypertarget{conclusion}{%
\section{Conclusion}\label{conclusion}}

We have given a definition of software and presented the view that AI and machine learning are subsets of software. Based on the relationship between different models, there is a distinction to be made between an AI algorithm that determines the model and the resulting model. Using machine learning terminology, there is a distinction between the algorithm used for training and the model used for inference.

As the applicable regulatory framework and case law make clear, whether software is a medical device within the scope of the Medical Device Directive or Regulation depends on the medical purpose that it has. If within that scope, software is classified using distinct classifications paradigms under the Directive compared to the Regulation. The classification under the Directive is based on the class of the hardware whereas the newly introduced classifications rules for software in the Regulation considered in light of the guidance published by the MDGC changed to software-based approach. Under the Regulation the class of software is the primary factor that determines the class of a device irrespective of whether the software is part of a hardware medical device or software as a medical device.

Determining whether software is within the scope of the Regulation has become more important given that the consequences are more substantial. Whereas under the Directive, the manufacturer would need to declare conformity with the requirements in the Directive give most software is in class I. While a prudent software manufacturer would most likely meet these requirements meaning that it is merely an issue of not declaring conformity. Under the Directive this would result in a formal error in the sense that the declaration procedure was not followed but should not lead to material differences.

Under the Regulation, a notified body would have to be involved for every product within the scope of the Regulation, and thus, for any software that is considered to be a medical device. This means that if a manufacturer is mistaken on whether a software has an intended medical purpose, then it is a noncompliance with the Regulation as a result of a material insufficiency given that the necessary certificates would not have been issued for the device. Therefore, the classification of software under the Regulation if using the guidance documents by the MDCG is not desirable in light of the overarching classification principle, which is based on benefit-risk of a device. Therefore, classification based on the implementation when this has no implications for the benefits or risks of a device could have the undesirable effect that technical choices are guided by the regulatory classification.

The crux in regulating software, including AI, is the validation and verification. Evidently this is challenging for complex product, more so when there are concerns of the robustness of the performance of AI models and when these models are applied in medical context. Therefore, the ability to introduce medical devices that use AI or machine learning depends on the possibility to validate the efficacy, robustness and safety of such a device. This requires sufficient guarantees of the robustness and performance of these products. While suggestions are being made on that front,\footnote{An example is to generate `digital biomarkers' through causal inference methods (\protect\hyperlink{ref-sternRegulatoryOversightCausal2019a}{Stern and Price (n 19)})} further research on the verification and validations of this type of software is essential to effectively regulate these products in a way that patients get access to the benefits of such products whilst guaranteeing their safety.

\hypertarget{references}{%
\section*{References}\label{references}}
\addcontentsline{toc}{section}{References}

\hypertarget{refs}{}
\begin{CSLReferences}{0}{0}
\leavevmode\hypertarget{ref-cambridgedictionarySoftware}{}%
Cambridge Dictionary, {`Software'} (\emph{Software \textbar{} meaning in the Cambridge English Dictionary}) \textless{}\url{https://dictionary.cambridge.org/dictionary/english/software}\textgreater{} accessed 4 September 2020

\leavevmode\hypertarget{ref-ecCOUNCILDIRECTIVE931993}{}%
EC, {`{COUNCIL DIRECTIVE} 93/42/{EEC} of 14 {June} 1993 Concerning Medical Devices'}

\leavevmode\hypertarget{ref-europeancommissionProposalREGULATIONEUROPEAN2012}{}%
European Commission, {`Proposal for a {REGULATION OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} on Medical Devices, and Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009'} (2012) COM(2012) 542 final

\leavevmode\hypertarget{ref-hamonRobustnessExplainabilityArtificial2020}{}%
Hamon R and others, \emph{Robustness and Explainability of {Artificial Intelligence}: From Technical to Policy Solutions.} (2020) \textless{}\url{https://op.europa.eu/publication/manifestation_identifier/PUB_KJNA30040ENN}\textgreater{} accessed 26 August 2020

\leavevmode\hypertarget{ref-mccarthyWhatArtificialIntelligence2007b}{}%
McCarthy J, \emph{What {Is Artificial Intelligence}?} ({Stanford University} 2007) \textless{}\url{http://www-formal.stanford.edu/jmc/}\textgreater{}

\leavevmode\hypertarget{ref-mdcgGuidanceQualificationClassification2019}{}%
MDCG, {`Guidance on {Qualification} and {Classification} of {Software} in {Regulation} ({EU}) 2017/745 -- {MDR} and {Regulation} ({EU}) 2017/746 -- {IVDR}'} (2019) 2019-11 \textless{}\url{https://ec.europa.eu/docsroom/documents/37581}\textgreater{}

\leavevmode\hypertarget{ref-mdcgGuidanceClinicalEvaluation2020}{}%
------, {`Guidance on {Clinical Evaluation} ({MDR}) / {Performance Evaluation} ({IVDR}) of {Medical Device Software}'} (2020) 2020-1 \textless{}\url{https://ec.europa.eu/docsroom/documents/40323}\textgreater{}

\leavevmode\hypertarget{ref-mdcgInterpretationArticle542020}{}%
------, {`Interpretation of {Article} 54(2)b Rev 1'} (2020) 2019-3 \textless{}\url{https://ec.europa.eu/docsroom/documents/40661}\textgreater{}

\leavevmode\hypertarget{ref-mdcgClinicalEvaluationEquivalence2020}{}%
------, {`Clinical {Evaluation} - {Equivalence}. {A} Guide for Manufacturers and Notified Bodies'} (2020) 2020-5

\leavevmode\hypertarget{ref-minssenWhenDoesStandAlone2020a}{}%
Minssen T, Mimler M and Mak V, {`When {Does Stand}-{Alone Software Qualify} as {A Medical Device} in the {European Union}?---{The Cjeu}'s {Decision} in {Snitem} and {What} It {Implies} for the {Next Generation} of {Medical Devices}'} {[}2020{]} Medical Law Review \textless{}\url{https://academic.oup.com/medlaw/advance-article/doi/10.1093/medlaw/fwaa012/5865470}\textgreater{} accessed 26 August 2020

\leavevmode\hypertarget{ref-pfeiferUnderstandingIntelligence1999a}{}%
Pfeifer R and Scheier C, \emph{Understanding Intelligence} ({MIT Press} 1999)

\leavevmode\hypertarget{ref-REGULATIONEU2017a}{}%
{`{REGULATION} ({EU}) 2017/745 {OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL} of 5 {April} 2017 on Medical Devices, Amending {Directive} 2001/83/{EC}, {Regulation} ({EC}) {No} 178/2002 and {Regulation} ({EC}) {No} 1223/2009 and Repealing {Council Directives} 90/385/{EEC} and 93/42/{EEC}'} 175

\leavevmode\hypertarget{ref-russellArtificialIntelligenceModern2010c}{}%
Russell SJ, Norvig P and Davis E, \emph{Artificial {Intelligence}: {A Modern Approach}} (3rd ed, {Prentice Hall} 2010)

\leavevmode\hypertarget{ref-silverMasteringGameGo2016}{}%
Silver D and others, {`Mastering the Game of {Go} with Deep Neural Networks and Tree Search'} (2016) 529 Nature 484 \textless{}\url{http://www.nature.com/articles/nature16961}\textgreater{} accessed 8 September 2020

\leavevmode\hypertarget{ref-sternRegulatoryOversightCausal2019a}{}%
Stern AD and Price WN, {`Regulatory {Oversight}, {Causal Inference}, and {Safe} and {Effective Health Care Machine Learning}'} {[}2019{]} Biostatistics \textless{}\url{https://academic.oup.com/biostatistics/advance-article/doi/10.1093/biostatistics/kxz044/5631849}\textgreater{} accessed 3 December 2019

\leavevmode\hypertarget{ref-TechnicalDocumentationEU}{}%
{`Technical Documentation and {EU} Declaration of Conformity'} (\emph{Your Europe - Business}) \textless{}\url{https://europa.eu/youreurope/business/product-requirements/compliance/technical-documentation-conformity/index_en.htm}\textgreater{} accessed 4 September 2020

\leavevmode\hypertarget{ref-vinyalsGrandmasterLevelStarCraft2019}{}%
Vinyals O and others, {`Grandmaster Level in {StarCraft II} Using Multi-Agent Reinforcement Learning'} (2019) 575 Nature 350 \textless{}\url{http://www.nature.com/articles/s41586-019-1724-z}\textgreater{} accessed 8 September 2020

\leavevmode\hypertarget{ref-vogelMedicalDeviceSoftware2011}{}%
Vogel DA, \emph{Medical Device Software Verification, Validation and Compliance} ({Artech House} 2011) \textless{}\url{http://site.ebrary.com/id/10436227}\textgreater{} accessed 9 September 2020

\leavevmode\hypertarget{ref-wikipediaAlgorithm}{}%
Wikipedia, {`Algorithm'} \textless{}\url{https://en.wikipedia.org/wiki/Algorithm}\textgreater{} accessed 4 September 2020

\leavevmode\hypertarget{ref-wikipediaConceptualModel}{}%
------, {`Conceptual Model'} \textless{}\url{https://en.wikipedia.org/wiki/Conceptual_model}\textgreater{} accessed 4 September 2020

\leavevmode\hypertarget{ref-wikipediaMathematicalModel}{}%
------, {`Mathematical Model'} \textless{}\url{https://en.wikipedia.org/wiki/Mathematical_model}\textgreater{} accessed 4 September 2020

\leavevmode\hypertarget{ref-BrainProducts2012}{}%
\emph{Brain {Products}} {[}2012{]}

\leavevmode\hypertarget{ref-SNITEM2017}{}%
\emph{{SNITEM}} {[}2017{]}

\end{CSLReferences}

\end{document}
